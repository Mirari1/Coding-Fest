/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @version 1.0.3
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */

/*
 * Swipe 2.0
 *
 * Brad Birdsall
 * Copyright 2013, MIT License
 *
*/

define("domReady",[],function(){"use strict";function e(e){var t;for(t=0;t<e.length;t+=1)e[t](u)}function t(){var t=d;c&&t.length&&(d=[],e(t))}function n(){c||(c=!0,o&&clearInterval(o),t())}function i(e){return c?e(u):d.push(e),i}var r,s,o,a="undefined"!=typeof window&&window.document,c=!a,u=a?document:null,d=[];if(a){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),s=document.createElement("div");try{r=null===window.frameElement}catch(l){}s.doScroll&&r&&window.external&&(o=setInterval(function(){try{s.doScroll(),n()}catch(e){}},30))}"complete"===document.readyState&&n()}return i.version="2.0.1",i.load=function(e,t,n,r){r.isBuild?n(null):i(n)},i}),define("dispatcher",[],function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}),define("touch/touch-detector.store",["dispatcher"],function(e){"use strict";var t=!1,n=!1,i=function(e){},r=function(){n="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,e.subscribe(i)},s=function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}(),o=function(){return{touch:n}};return t||(t=!0,r()),{eventEmitter:s,getData:o}}),function(){"use strict";function e(n,i){function r(e,t){return function(){return e.apply(t,arguments)}}var s;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=n,this.tapDelay=i.tapDelay||200,!e.notNeeded(n)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,c=0,u=o.length;u>c;c++)a[o[c]]=r(a[o[c]],a);t&&(n.addEventListener("mouseover",this.onMouse,!0),n.addEventListener("mousedown",this.onMouse,!0),n.addEventListener("mouseup",this.onMouse,!0)),n.addEventListener("click",this.onClick,!0),n.addEventListener("touchstart",this.onTouchStart,!1),n.addEventListener("touchmove",this.onTouchMove,!1),n.addEventListener("touchend",this.onTouchEnd,!1),n.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(n.removeEventListener=function(e,t,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(n,e,t.hijacked||t,i):r.call(n,e,t,i)},n.addEventListener=function(e,t,i){var r=Node.prototype.addEventListener;"click"===e?r.call(n,e,t.hijacked||(t.hijacked=function(e){e.propagationStopped||t(e)}),i):r.call(n,e,t,i)}),"function"==typeof n.onclick&&(s=n.onclick,n.addEventListener("click",function(e){s(e)},!1),n.onclick=null)}}var t=navigator.userAgent.indexOf("Android")>0,n=/iP(ad|hone|od)/.test(navigator.userAgent),i=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=n&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(n&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!t;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return t&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;n&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,r,s;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),r=e.targetTouches[0],n){if(s=window.getSelection(),s.rangeCount&&!s.isCollapsed)return!0;if(!i){if(r.identifier&&r.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=r.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=r.pageX,this.touchStartY=r.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var s,o,a,c,u,d=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(u=e.changedTouches[0],d=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||d,d.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=d.tagName.toLowerCase(),"label"===a){if(s=this.findControl(d)){if(this.focus(d),t)return!1;d=s}}else if(this.needsFocus(d))return e.timeStamp-o>100||n&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(d),this.sendClick(d,e),n&&"select"===a||(this.targetElement=null,e.preventDefault()),!1);return n&&!i&&(c=d.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(d)||(e.preventDefault(),this.sendClick(d,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;t&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var n,i,r;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!t)return!0;if(n=document.querySelector("meta[name=viewport]")){if(-1!==n.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(n=document.querySelector("meta[name=viewport]")))){if(-1!==n.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction?!0:!1},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("fastclick",[],function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),define("touch/touch-detector.view",["dispatcher","touch/touch-detector.store","fastclick"],function(e,t,n){"use strict";var i=function(e){var t=document.getElementsByTagName("body")[0];e.touch?(console.log("touch version"),n.attach(document.body),t.classList.remove("hover"),t.classList.add("touch")):(console.log("hover version"),t.classList.remove("touch"),t.classList.add("hover"))},r=function(){var e;e=t.getData(),i(e),t.eventEmitter.subscribe(function(){e=t.getData(),i(e)})};return{init:r}}),define("menu/menu.store",["dispatcher"],function(e){"use strict";var t=!1,n=!1,i=function(e){if("menu-open"===e.type){if(n)return;n=!0,s.dispatch({type:"change"})}if("menu-close"===e.type){if(!n)return;n=!1,s.dispatch({type:"change"})}"menu-toggle"===e.type&&(n=n?!1:!0,s.dispatch({type:"change"}))},r=function(){e.subscribe(i)},s=function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}(),o=function(){return{active:n}};return t||(t=!0,r()),{eventEmitter:s,getData:o}}),define("menu/menu.view",["dispatcher","menu/menu.store"],function(e,t){"use strict";var n,i=!1,r=function(e){i!==e.active&&(i=e.active,i?n.classList.add("show-navigation"):n.classList.remove("show-navigation"))},s=function(){var e;n=document.querySelector(".view-menu"),n&&(e=t.getData(),r(e),t.eventEmitter.subscribe(function(){e=t.getData(),r(e)}))};return{init:s}}),define("menu/menu-controls.view",["dispatcher","menu/menu.store"],function(e,t){"use strict";var n,i=function(e){if(e.active)for(var t=n.length-1;t>=0;t--)n[t].classList.add("active");else for(var t=n.length-1;t>=0;t--)n[t].classList.remove("active")},r=function(t){t.addEventListener("click",function(){e.dispatch({type:"menu-toggle"})},!1)},s=function(){var e;n=document.querySelectorAll(".view-menu-toggle");for(var s=n.length-1;s>=0;s--)r(n[s]);e=t.getData(),i(e),t.eventEmitter.subscribe(function(){e=t.getData(),i(e)})};return{init:s}}),define("scroll/scroll.store",["dispatcher"],function(e){"use strict";var t=!1,n=0,i=0,r=function(){var e=(window.pageYOffset||window.document.scrollTop)-(window.document.clientTop||0);return isNaN(e)&&(e=0),e},s=function(){var e=(window.pageXOffset||window.document.scrollLeft)-(window.document.clientLeft||0);return isNaN(e)&&(e=0),e},o=function(){n=r(),i=s(),window.addEventListener("scroll",function(e){n=r(),i=s(),a.dispatch({type:"change"})},!1)},a=function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}(),c=function(){return{top:n,left:i}};return t||(t=!0,o()),{eventEmitter:a,getData:c}}),define("menu/menu-scroll.view",["dispatcher","menu/menu.store","scroll/scroll.store"],function(e,t,n){"use strict";var i=!1,r=function(e){i!==e.active&&(i=e.active)},s=function(t){i&&e.dispatch({type:"menu-close"})},o=function(){var e,i;e=t.getData(),r(e),t.eventEmitter.subscribe(function(){e=t.getData(),r(e)}),n.eventEmitter.subscribe(function(){i=n.getData(),s(i)})};return{init:o}}),define("popup/popup.store",["dispatcher"],function(e){"use strict";var t=!1,n=!1,i=function(e){if("popup-toggle"===e.type&&(t=t===e.id?!1:e.id,o.dispatch({type:"change"})),"popup-close-all"===e.type){if(t===!1)return;t=!1,o.dispatch({type:"change"})}},r=function(e){var n=e.id;return n?void(e.classList.contains("active")&&(t=n)):void console.warn("popup id is missing")},s=function(){for(var t=document.querySelectorAll(".popup"),n=t.length-1;n>=0;n--)r(t[n]);e.subscribe(i)},o=function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}(),a=function(){return{active:t}},c=function(e){for(var t=items.length-1;t>=0;t--)if(items[t].id===e)return items[t];return!1};return n||(n=!0,s()),{eventEmitter:o,getData:a,getDataById:c}}),define("popup/popup.view",["dispatcher","popup/popup.store"],function(e,t){"use strict";var n,i={},r=!1,s=function(t){r!==t.active&&(r?i[r]&&i[r].classList.remove("active"):(e.dispatch({type:"overlay-show"}),n.classList.add("prevent-scroll")),r=t.active,r?i[r]&&i[r].classList.add("active"):(e.dispatch({type:"overlay-hide"}),n.classList.remove("prevent-scroll")))},o=function(e){var t=e.id;return t?(e.classList.contains("active")&&(r=t),void(i[t]=e)):void console.warn("popup id is missing")},a=function(){var e,i=document.querySelectorAll(".popup");n=document.getElementsByTagName("body")[0];for(var r=i.length-1;r>=0;r--)o(i[r]);e=t.getData(),s(e),t.eventEmitter.subscribe(function(){e=t.getData(),s(e)})};return{init:a}}),define("popup/popup-controls.view",["dispatcher","popup/popup.store"],function(e,t){"use strict";var n={},i=!1,r=function(e){i!==e.active&&(i&&n[i].classList.remove("active"),i=e.active,i&&n[i].classList.add("active"))},s=function(t){var r=t.getAttribute("data-popup");return r?(t.classList.contains("active")&&(i=r),t.addEventListener("click",function(){e.dispatch({type:"popup-toggle",id:r})},!1),void(n[r]=t)):void console.warn("data-popup attribute is missing")},o=function(){for(var e,n=document.querySelectorAll(".view-popup-toggle"),i=n.length-1;i>=0;i--)s(n[i]);e=t.getData(),r(e),t.eventEmitter.subscribe(function(){e=t.getData(),r(e)})};return{init:o}}),define("popup/popup-close.view",["dispatcher"],function(e){"use strict";var t=function(t){t.addEventListener("click",function(){e.dispatch({type:"popup-close-all"})},!1)},n=function(){for(var e=document.querySelectorAll(".view-popup-close"),n=e.length-1;n>=0;n--)t(e[n])};return{init:n}}),define("header-shift/header-shift.store",["dispatcher"],function(e){"use strict";var t=!1,n=!1,i=function(e){if("first-scroll-enable"===e.type){if(n)return;n=!0,s.dispatch({type:"change"})}if("first-scroll-disable"===e.type){if(!n)return;n=!1,s.dispatch({type:"change"})}},r=function(){e.subscribe(i)},s=function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}(),o=function(){return{active:n}};return t||(t=!0,r()),{eventEmitter:s,getData:o}}),define("header-shift/header-shift.view",["dispatcher","header-shift/header-shift.store"],function(e,t){"use strict";var n,i=!1,r=!1,s=function(e){r&&i===e.active||(i=e.active,i?n.classList.add("shift-top"):n.classList.remove("shift-top"),r||setTimeout(function(){r=!0,n.classList.add("shift-initialized")},10))},o=function(){var e;n=document.getElementsByTagName("header")[0],n&&(e=t.getData(),s(e),t.eventEmitter.subscribe(function(){e=t.getData(),s(e)}))};return{init:o}}),define("header-shift/header-shift-scroll.view",["dispatcher","scroll/scroll.store"],function(e,t){"use strict";var n=!1,i=function(t){n&&t.top<=50?(n=!1,e.dispatch({type:"first-scroll-disable"})):!n&&t.top>=50&&(n=!0,e.dispatch({type:"first-scroll-enable"}))},r=function(){var e;e=t.getData(),i(e),t.eventEmitter.subscribe(function(){e=t.getData(),i(e)})};return{init:r}}),define("resize/resize.store",["dispatcher"],function(e){"use strict";var t=!1,n={width:0,height:0},i=function(){var e=0,t=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),{height:t,width:e}},r=function(){n=i(),window.addEventListener("resize",function(){n=i(),s.dispatch({type:"change"})},!1),window.addEventListener("orientationchange",function(){n=i(),s.dispatch({type:"change"})},!1),window.addEventListener("load",function(){n=i(),s.dispatch({type:"change"})},!1)},s=function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}(),o=function(){return{height:n.height,width:n.width}};return t||(t=!0,r()),{eventEmitter:s,getData:o}}),define("font-resize/font-resize.view",["dispatcher","resize/resize.store"],function(e,t){"use strict";var n,i=[],r=function(){for(var e=function(e){var t=e.container.offsetWidth,i=e.container.clientHeight,r=t/e.originalWidth*1.35,s=e.element.offsetWidth,o=e.element.clientHeight,a=(t-s)/2,c=(i-o)/2;e.initialized&&e.containerWidth===t||(e.initialized||setTimeout(function(){e.element.classList.add("font-resize-initialized"),e.initialized=!0},10),e.containerWidth=t,e.element.style[n]="translateX("+a+"px) translateY("+c+"px) scale("+r+")")},t=function(e){var t=e.container.offsetWidth,i=e.container.clientHeight,r=i/e.originalWidth*1.35,s=e.element.offsetWidth,o=e.element.clientHeight,a=(t-s)/2,c=(i-o)/2;e.initialized&&e.containerHeight===i||(e.initialized||setTimeout(function(){e.element.classList.add("font-resize-initialized"),e.initialized=!0},10),e.containerHeight=i,e.element.style[n]="translateX("+a+"px) translateY("+c+"px) scale("+r+") rotate(90deg)")},r=i.length-1;r>=0;r--)"horizontal"===i[r].direction?e(i[r]):"vertical"===i[r].direction&&t(i[r])},s=function(e){var t=e.parentNode,n=e.offsetWidth,r=e.getAttribute("data-direction")||"horizontal";i.push({initialized:!1,direction:r,originalWidth:n,element:e,container:t,containerWidth:t.offsetWidth,containerHeight:t.clientHeight})},o=function(){var e=document.querySelectorAll(".view-font-resize");if(e&&e.length){n=Modernizr.prefixed("transform");for(var i=e.length-1;i>=0;i--)s(e[i]);r(),t.eventEmitter.subscribe(function(){r()})}};return{init:o}}),define("swipe",[],function(){function e(e,t){"use strict";function n(){p=y.children,w=p.length,p.length<2&&(t.continuous=!1),v.transitions&&t.continuous&&p.length<3&&(y.appendChild(p[0].cloneNode(!0)),y.appendChild(y.children[1].cloneNode(!0)),p=y.children),m=new Array(p.length),g=e.getBoundingClientRect().width||e.offsetWidth,y.style.width=p.length*g+"px";for(var n=p.length;n--;){var i=p[n];i.style.width=g+"px",i.setAttribute("data-index",n),v.transitions&&(i.style.left=n*-g+"px",a(n,b>n?-g:n>b?g:0,0))}t.continuous&&v.transitions&&(a(s(b-1),-g,0),a(s(b+1),g,0)),v.transitions||(y.style.left=b*-g+"px"),e.style.visibility="visible"}function i(){t.continuous?o(b-1):b&&o(b-1)}function r(){t.continuous?o(b+1):b<p.length-1&&o(b+1)}function s(e){return(p.length+e%p.length)%p.length}function o(e,n){if(b!=e){if(v.transitions){var i=Math.abs(b-e)/(b-e);if(t.continuous){var r=i;i=-m[s(e)]/g,i!==r&&(e=-i*p.length+e)}for(var o=Math.abs(b-e)-1;o--;)a(s((e>b?e:b)-o-1),g*i,0);e=s(e),a(b,g*i,n||E),a(e,0,n||E),t.continuous&&a(s(e-i),-(g*i),0)}else e=s(e),u(b*-g,e*-g,n||E);b=e,h(t.callback&&t.callback(b,p[b]))}}function a(e,t,n){c(e,t,n),m[e]=t}function c(e,t,n){var i=p[e],r=i&&i.style;r&&(r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=n+"ms",r.webkitTransform="translate("+t+"px,0)translateZ(0)",r.msTransform=r.MozTransform=r.OTransform="translateX("+t+"px)")}function u(e,n,i){if(!i)return void(y.style.left=n+"px");var r=+new Date,s=setInterval(function(){var o=+new Date-r;return o>i?(y.style.left=n+"px",x&&d(),t.transitionEnd&&t.transitionEnd.call(event,b,p[b]),void clearInterval(s)):void(y.style.left=(n-e)*(Math.floor(o/i*100)/100)+e+"px")},4)}function d(){L=setTimeout(r,x)}function l(){x=0,clearTimeout(L)}var f=function(){},h=function(e){setTimeout(e||f,0)},v={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(void 0!==e.style[t[n]])return!0;return!1}(document.createElement("swipe"))};if(e){var p,m,g,w,y=e.children[0];t=t||{};var b=parseInt(t.startSlide,10)||0,E=t.speed||300;t.continuous=void 0!==t.continuous?t.continuous:!0;var L,T,x=t.auto||0,k={},D={},S={handleEvent:function(e){switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":h(this.end(e));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":h(this.transitionEnd(e));break;case"resize":h(n)}t.stopPropagation&&e.stopPropagation()},start:function(e){var t=e.touches[0];k={x:t.pageX,y:t.pageY,time:+new Date},T=void 0,D={},y.addEventListener("touchmove",this,!1),y.addEventListener("touchend",this,!1)},move:function(e){if(!(e.touches.length>1||e.scale&&1!==e.scale)){t.disableScroll&&e.preventDefault();var n=e.touches[0];D={x:n.pageX-k.x,y:n.pageY-k.y},"undefined"==typeof T&&(T=!!(T||Math.abs(D.x)<Math.abs(D.y))),T||(e.preventDefault(),l(),t.continuous?(c(s(b-1),D.x+m[s(b-1)],0),c(b,D.x+m[b],0),c(s(b+1),D.x+m[s(b+1)],0)):(D.x=D.x/(!b&&D.x>0||b==p.length-1&&D.x<0?Math.abs(D.x)/g+1:1),c(b-1,D.x+m[b-1],0),c(b,D.x+m[b],0),c(b+1,D.x+m[b+1],0)))}},end:function(e){var n=+new Date-k.time,i=Number(n)<250&&Math.abs(D.x)>20||Math.abs(D.x)>g/2,r=!b&&D.x>0||b==p.length-1&&D.x<0;t.continuous&&(r=!1);var o=D.x<0;T||(i&&!r?(o?(t.continuous?(a(s(b-1),-g,0),a(s(b+2),g,0)):a(b-1,-g,0),a(b,m[b]-g,E),a(s(b+1),m[s(b+1)]-g,E),b=s(b+1)):(t.continuous?(a(s(b+1),g,0),a(s(b-2),-g,0)):a(b+1,g,0),a(b,m[b]+g,E),a(s(b-1),m[s(b-1)]+g,E),b=s(b-1)),t.callback&&t.callback(b,p[b])):t.continuous?(a(s(b-1),-g,E),a(b,0,E),a(s(b+1),g,E)):(a(b-1,-g,E),a(b,0,E),a(b+1,g,E))),y.removeEventListener("touchmove",S,!1),y.removeEventListener("touchend",S,!1)},transitionEnd:function(e){parseInt(e.target.getAttribute("data-index"),10)==b&&(x&&d(),t.transitionEnd&&t.transitionEnd.call(e,b,p[b]))}};return n(),x&&d(),v.addEventListener?(v.touch&&y.addEventListener("touchstart",S,!1),v.transitions&&(y.addEventListener("webkitTransitionEnd",S,!1),y.addEventListener("msTransitionEnd",S,!1),y.addEventListener("oTransitionEnd",S,!1),y.addEventListener("otransitionend",S,!1),y.addEventListener("transitionend",S,!1)),window.addEventListener("resize",S,!1)):window.onresize=function(){n()},{setup:function(){n()},slide:function(e,t){l(),o(e,t)},prev:function(){l(),i()},next:function(){l(),r()},stop:function(){l()},getPos:function(){return b},getNumSlides:function(){return w},kill:function(){l(),y.style.width="",y.style.left="";for(var e=p.length;e--;){var t=p[e];t.style.width="",t.style.left="",v.transitions&&c(e,0,0)}v.addEventListener?(y.removeEventListener("touchstart",S,!1),y.removeEventListener("webkitTransitionEnd",S,!1),y.removeEventListener("msTransitionEnd",S,!1),y.removeEventListener("oTransitionEnd",S,!1),y.removeEventListener("otransitionend",S,!1),y.removeEventListener("transitionend",S,!1),window.removeEventListener("resize",S,!1)):window.onresize=null}}}}return{Swipe:e}}),define("slider/slider.store",["dispatcher"],function(e){"use strict";var t=[],n=!1,i=function(e){var t;if("slider-change-next"===e.type){if(t=c(e.id),!t)return void console.warn("slider with id "+e.id+" is missing");t.index++,t.index>t.total&&(t.index=0),o.dispatch({type:"change"})}if("slider-change-prev"===e.type){if(t=c(e.id),!t)return void console.warn("slider with id "+e.id+" is missing");t.index--,t.index<0&&(t.index=t.total),o.dispatch({type:"change"})}if("slider-change-to"===e.type){if(t=c(e.id),!t)return void console.warn("slider with id "+e.id+" is missing");if(t.index!==e.index){if(e.index>t.total||e.index<0)return void console.warn("no slide width index "+e.index+" for slider width id "+e.id);t.index=e.index,o.dispatch({type:"change"})}}},r=function(e){var n,i=0,r=e.querySelectorAll(".slide");n=r.length-1,t.push({id:e.id,total:n,index:i,slides:r})},s=function(){var t=document.querySelectorAll(".view-slider");if(t&&t.length){for(var n=t.length-1;n>=0;n--)r(t[n]);e.subscribe(i)}},o=function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}(),a=function(){return t},c=function(e){for(var n=t.length-1;n>=0;n--)if(t[n].id===e)return t[n];return!1};return n||(n=!0,s()),{eventEmitter:o,getData:a,getDataById:c}}),define("slider/slider.view",["dispatcher","swipe","slider/slider.store"],function(e,t,n){"use strict";var i=[],r=function(){for(var t=function(t){var i=n.getDataById(t.id);return i?(t.initialized||(t.initialized=!0,i.index!==t.current&&(t.current=i.index,t.slider.slide(t.current,0))),void(i.index!==t.current&&(t.current=i.index,t.slider.slide(t.current,t.speed),t.bind&&e.dispatch({type:"slider-change-to",id:t.bind,index:t.current})))):void console.warn("error. no data in store for slider with id "+t.id)},r=i.length-1;r>=0;r--)t(i[r])},s=function(n){var r,s=0,o=n.getAttribute("data-speed"),a=n.id,c=n.classList.contains("update-query"),u=(n.classList.contains("update-class"),n.getAttribute("data-slider-bind")||!1);o=o?parseInt(o):700,r=new t.Swipe(n,{speed:o,startSlide:s,callback:function(t,n){e.dispatch({type:"slider-change-to",id:a,index:t})}}),n.parentNode.classList.add("slider-initialized"),s>0&&(r.slide(s,0),e.dispatch({type:"slider-change-to",id:a,index:s})),i.push({initialized:!1,current:s,slider:r,id:n.id,speed:o,updateQuery:c,bind:u})},o=function(){var e=document.querySelectorAll(".view-slider");if(e&&e.length){for(var t=e.length-1;t>=0;t--)s(e[t]);r(),n.eventEmitter.subscribe(function(){r()})}};return{init:o}}),define("slider/slider-arrows.view",["dispatcher","slider/slider.store"],function(e,t){"use strict";var n=[],i=function(){for(var e=function(e){var n,i;n=e.sliders[0],i=t.getDataById(n),i&&(e.hidden||"prev"!==e.slide||0!==i.index?e.hidden&&"prev"===e.slide&&0!==i.index&&(e.hidden=!1,e.element.classList.remove("hidden")):(e.hidden=!0,e.element.classList.add("hidden")),e.hidden||"next"!==e.slide||i.index!==i.total?e.hidden&&"next"===e.slide&&i.index!==i.total&&(e.hidden=!1,e.element.classList.remove("hidden")):(e.hidden=!0,e.element.classList.add("hidden")))},i=n.length-1;i>=0;i--)e(n[i])},r=function(e){var t,i=e.getAttribute("data-sliders"),r=e.getAttribute("data-slide");return i?r?(t=i.split("||"),void n.push({element:e,sliders:t,slide:r,hidden:!1})):void console.warn("data-slide attribute is missing"):void console.warn("data-sliders attribute is missing")},s=function(t){t.element.addEventListener("click",function(){for(var n=t.sliders.length-1;n>=0;n--)e.dispatch({type:"slider-change-"+t.slide,id:t.sliders[n]})},!1)},o=function(){for(var e=document.querySelectorAll(".view-slider-arrow"),o=e.length-1;o>=0;o--)r(e[o]);for(var o=n.length-1;o>=0;o--)s(n[o]);i(),t.eventEmitter.subscribe(function(){i()})};return{init:o}}),define("slider/slider-controls.view",["dispatcher","slider/slider.store"],function(e,t){"use strict";var n=[],i=function(e){for(var i=function(e){var n,i=e.sliders[0];n=t.getDataById(i),e.active&&n.index!==e.slide&&(e.active=!1,e.element.classList.remove("active")),e.active||n.index!==e.slide||(e.active=!0,e.element.classList.add("active"))},r=n.length-1;r>=0;r--)i(n[r])},r=function(e){var t,i=e.getAttribute("data-sliders"),r=e.getAttribute("data-slide");return i?r?(t=i.split("||"),r=parseInt(r),void n.push({element:e,sliders:t,slide:r,active:!1})):void console.warn("data-slide attribute is missing"):void console.warn("data-sliders attribute is missing")},s=function(t){t.element.addEventListener("click",function(){for(var n=t.sliders.length-1;n>=0;n--)e.dispatch({type:"slider-change-to",id:t.sliders[n],index:t.slide})},!1)},o=function(){for(var e,o=document.querySelectorAll(".view-slider-control"),a=o.length-1;a>=0;a--)r(o[a]);for(var a=n.length-1;a>=0;a--)s(n[a]);e=t.getData(),i(e),t.eventEmitter.subscribe(function(){e=t.getData(),i(e)})};return{init:o}}),define("content-load/content-load.store",["dispatcher"],function(e){"use strict";var t=!1,n={},i=function(e){var t=e.id,i=function(e,t){if("start"===t){if("waiting"!==e.status)return;e.status="start"}if("progress"===t){if("start"!==e.status)return;e.status="progress"}if("finish"===t){if("start"!==e.status&&"progress"!==e.status)return;e.status="finish"}"disable"===t&&(e.status="disable"),"waiting"===t&&(e.status="waiting"),o.dispatch({type:"change"})};"content-page-load-finish"===e.type&&(n[t].currentPage=n[t].currentPage+1,n[t].currentPage+1>=n[t].totalPages&&i(n[t],"disable")),"content-page-load-start"===e.type&&(i(n[t],"start"),setTimeout(function(){i(n[t],"progress")},1e3)),"content-page-load-progress"===e.type&&i(n[t],"progress"),"content-page-load-finish"===e.type&&(i(n[t],"finish"),setTimeout(function(){i(n[t],"waiting")},1e3)),"content-page-load-error"===e.type&&i(n[t],"waiting")},r=function(e){var t=e.id,i=e.getAttribute("data-currentPage")||0,r=e.getAttribute("data-totalPages")||1,s=e.getAttribute("data-category"),o="waiting";i=parseInt(i),r=parseInt(r),i+1>=r&&(o="disabled"),n[t]={id:t,status:o,currentPage:i,totalPages:r,category:s}},s=function(){var t=document.querySelectorAll(".view-load-container");if(t&&t.length){for(var n=t.length-1;n>=0;n--)r(t[n]);e.subscribe(i)}},o=function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}(),a=function(){return{items:n}},c=function(e){return n.hasOwnProperty(e)?n[e]:!1};return t||(t=!0,s()),{eventEmitter:o,getData:a,getDataById:c}}),define("content-load/content-load-controls.view",["dispatcher","content-load/content-load.store"],function(e,t){"use strict";var n={},i=function(){var e=function(t,n){var t=t.parentNode;return"BODY"===t.tagName.toUpperCase()?!1:t.classList.contains(n)?t:e(t,n)},i=function(n){var i,r=n.id,s=t.getDataById(r);if("disable"===s.status&&n.disabled===!1){if(n.disabled=!0,i=e(n.element,"show-more"),!i)return;i.classList.add("hidden")}};for(var r in n)i(n[r])},r=function(e){var t=e.getAttribute("data-container");return t?void(n[t]={id:t,element:e,disabled:!1}):void console.warn("load button data-container attribute is missing")},s=function(n){var i,r,s,o=n.element;o.addEventListener("click",function(){var o,a=t.getDataById(n.id),c="",u={},d=this.getAttribute("data-action");if(i=a.status,r=a.currentPage+1,s=a.category,"waiting"===i){if(!d)return void console.warn("data-action attribute is missing");if(!FormData)return u={id:n.id,type:"next-page",page:r,category:s},c=serialize(u),void(location.href=d+"?"+c);o=new FormData,o.append("id",n.id),o.append("type","next-page"),o.append("page",r),o.append("category",s),e.dispatch({type:"content-page-load-start",id:n.id}),fetch(d,{method:"post",credentials:"include",body:o}).then(function(e){return e.json()}).then(function(t){e.dispatch({type:"ajax-server-responce",response:t}),t.hasOwnProperty("status")&&"success"===t.status&&(e.dispatch({type:"content-page-load-finish",id:n.id}),e.dispatch({type:"ajax-content-load",serverData:t,id:n.id})),t.hasOwnProperty("status")&&"error"!==t.status||e.dispatch({
type:"content-page-load-error",id:n.id})})}},!1)},o=function(){var e=document.querySelectorAll(".view-load-control");if(e&&e.length){for(var o=e.length-1;o>=0;o--)r(e[o]);for(var a in n)s(n[a]);i(),t.eventEmitter.subscribe(function(){i()})}};return{init:o}}),define("content-load/content-load-progress.view",["dispatcher","content-load/content-load.store"],function(e,t){"use strict";var n={},i=function(e){var i=function(e){var n=e.id,i=t.getDataById(n);i.status!==e.status&&(e.status=i.status,("waiting"===e.status||"disable"===e.status)&&(e.element.classList.remove("start"),e.element.classList.remove("progress"),e.element.classList.remove("finish")),"start"===e.status&&(e.element.classList.remove("progress"),e.element.classList.remove("finish"),setTimeout(function(){e.element.classList.add("start")},0)),"progress"===e.status&&(e.element.classList.remove("start"),e.element.classList.remove("finish"),setTimeout(function(){e.element.classList.add("progress")},0)),"finish"===e.status&&(e.element.classList.remove("start"),e.element.classList.remove("progress"),setTimeout(function(){e.element.classList.add("finish")},0)))};for(var r in n)i(n[r])},r=function(e){var t=e.getAttribute("data-container");return t?void(n[t]={id:t,element:e,status:"waiting"}):void console.warn("data-container attribute is missing")},s=function(){for(var e=document.querySelectorAll(".view-load-progressbar"),n=e.length-1;n>=0;n--)r(e[n]);i(),t.eventEmitter.subscribe(function(){i()})};return{init:s}}),define("content-load/content-load.view",["dispatcher"],function(e){"use strict";var t={},n=function(n){var i,r,s,o,a=function(t,n){n.classList.add("before-insert"),t.appendChild(n),e.dispatch({type:"mutation-element-insert",element:n}),setTimeout(function(){n.classList.remove("before-insert")},10)};if("ajax-content-load"===n.type){if(i=n.serverData,!t.hasOwnProperty(n.id))return;if("success"!==i.status)return;r=t[n.id],s=document.createElement("div"),s.innerHTML=i.response,o=s.querySelectorAll(".post");for(var c=0;c<=o.length-1;c++)a(r.element,o[c])}},i=function(e){var n=e.id;return n?void(t[n]={id:n,element:e}):void console.warn("id is missing")},r=function(){var t=document.querySelectorAll(".view-load-container");if(t&&t.length){for(var r=t.length-1;r>=0;r--)i(t[r]);e.subscribe(n)}};return{init:r}}),define("decorations/text-split.view",["dispatcher","resize/resize.store"],function(e,t){"use strict";var n=[],i=function(e){for(var t=e.querySelectorAll(".view-hover-inner"),n=t.length-1;n>=0;n--)s(t[n]);e.classList.contains("view-hover-inner")&&s(e),r()},r=function(){for(var e=function(e){var t,n,i,r,s,o=e.text,a=[],c=[],u=e.element,d=0,l=0,f=function(e,t){var n,i;n=document.createElement("div"),i=document.createElement("span"),i.innerHTML=t,n.appendChild(i),e.appendChild(n)};if(o){for(a=o.split(/ /),u.classList.remove("text-split-visible"),u.classList.add("text-split-hidden"),u.innerHTML=a[0],t=u.clientHeight,n=-1,s=0,r=0;n<a.length-1;){if(l++,u.innerHTML="",c[s]=[],r=0,l>=1e3){console.dir(a);break}for(d=n+1;d<=a.length-1;d++){if(r>0&&(u.innerHTML+=" "),a[d]&&""!==a[d]){if(u.innerHTML+=a[d],u.clientHeight>t)break;c[s].push(a[d])}n=d,r++}s++}u.innerHTML="";for(var d=0;d<=c.length-1;d++){i="";for(var h=0;h<=c[d].length-1;h++)h>0&&(i+=" "),i+=c[d][h];f(u,i)}u.classList.remove("text-split-hidden"),u.classList.add("text-split-visible")}},t=n.length-1;t>=0;t--)e(n[t])},s=function(e){var t=function(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/,"").replace(/-/g," ")},i=e.innerHTML;i=t(i),n.push({element:e,text:i,initialized:!1})},o=function(){for(var n=document.querySelectorAll(".view-split"),o=n.length-1;o>=0;o--)s(n[o]);r(),t.eventEmitter.subscribe(function(){setTimeout(function(){r()},0)}),e.subscribe(function(e){"mutation-element-insert"===e.type&&i(e.element)})};return{init:o}}),define("decorations/group-hover.view",["dispatcher"],function(e){"use strict";var t=function(e){for(var t=e.querySelectorAll(".view-hover-inner"),i=t.length-1;i>=0;i--)n(t[i]);e.classList.contains("view-hover-inner")&&n(e)},n=function(e){var t,n=function(e,t){var e=e.parentNode;return"BODY"===e.tagName.toUpperCase()?!1:e.classList.contains(t)?e:n(e,t)};t=n(e,"view-hover-outer"),t&&(e.addEventListener("mouseenter",function(){t.classList.add("group-hover")},!1),e.addEventListener("mouseleave",function(){t.classList.remove("group-hover")},!1))},i=function(){for(var i=document.querySelectorAll(".view-hover-inner"),r=i.length-1;r>=0;r--)n(i[r]);e.subscribe(function(e){"mutation-element-insert"===e.type&&t(e.element)})};return{init:i}}),define("video/iframe-resize.view",["dispatcher","resize/resize.store"],function(e,t){"use strict";var n,i=[],r=function(e){for(var t=function(e){e.element.style.height=e.element.clientWidth/e.ratio+"px"},n=i.length-1;n>=0;n--)t(i[n])},s=function(e){var t,n=e.width,r=e.height;n&&r&&(n=parseInt(n),r=parseInt(r),t=n/r,e.style.width="100%",i.push({element:e,width:n,height:r,ratio:t}))},o=function(){var e;if(n=document.getElementsByTagName("iframe"),n&&n.length){for(var i=n.length-1;i>=0;i--)s(n[i]);e=t.getData(),r(e)}};return{init:o}}),define("social-widgets/social-widgets.view",["dispatcher"],function(e){"use strict";var t=function(){function e(){var e,t;e=s.clientHeight,t=s.clientWidth,VK&&VK.Widgets.Group("vk-groups",{mode:0,width:t,height:e,color1:"FFFFFF",color2:"2B587A",color3:"5B7FA6"},98154448)}function t(){var e,t,n=r.querySelector(".fb-page");n&&(e=r.clientHeight,t=r.clientWidth,n.setAttribute("data-width",t),n.setAttribute("data-height",e),function(e,t,n){var i,r=e.getElementsByTagName(t)[0];e.getElementById(n)||(i=e.createElement(t),i.id=n,i.src="http://connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v2.3&appId=264001140452773",r.parentNode.insertBefore(i,r))}(document,"script","facebook-jssdk"))}function n(){!function(e,t,n){var i,r=e.getElementsByTagName(t)[0],s=/^http:/.test(e.location)?"http":"https";e.getElementById(n)||(i=e.createElement(t),i.id=n,i.src=s+"://platform.twitter.com/widgets.js",r.parentNode.insertBefore(i,r))}(document,"script","twitter-wjs")}var i=document.getElementById("twitter-widget-container"),r=document.getElementById("facebook-widget-container"),s=document.getElementById("vk-widget-container");i&&r&&s&&(e(),n(),t())};return{init:t}}),define("social-share/social-share.view",["dispatcher"],function(e){"use strict";var t=function(){var e=document.querySelector(".social-share");if(null!==e)for(var t=e.getElementsByTagName("a"),n=t.length-1;n>=0;n--)t[n].addEventListener("click",function(e){e.preventDefault(),window.open(this.href,"Share","top=200,left=200,width=600,height=400")},!1)};return{init:t}}),define("lines-hider/lines-hider.store",["dispatcher"],function(e){"use strict";var t=!1,n=!0,i=function(e){if("reading-start"===e.type){if(n===!0)return;n=!0,s.dispatch({type:"change"})}if("reading-stop"===e.type){if(n===!1)return;n=!1,s.dispatch({type:"change"})}},r=function(){e.subscribe(i)},s=function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}(),o=function(){return{reading:n}};return t||(t=!0,r()),{eventEmitter:s,getData:o}}),define("lines-hider/lines-hider.view",["dispatcher","lines-hider/lines-hider.store","scroll/scroll.store"],function(e,t,n){"use strict";var i,r,s=function(e){e.reading?i.classList.add("reading"):i.classList.remove("reading")},o=function(){clearTimeout(r),e.dispatch({type:"reading-stop"}),r=setTimeout(function(){e.dispatch({type:"reading-start"})},2e3)},a=function(){var e;i=document.getElementsByTagName("body")[0],e=t.getData(),s(e),t.eventEmitter.subscribe(function(){e=t.getData(),s(e)}),n.eventEmitter.subscribe(o)};return{init:a}}),define("change-hover/change-hover.view",["dispatcher"],function(e){"use strict";var t,n=["super-hover-0","super-hover-1","super-hover-2"],i=n.length,r=0,s=function(){var e=Math.floor(Math.random()*i);return e!==r?(t=r,r=e,e):s()},o=function(){var e=document.querySelector(".post.first-article");if(null===e)return"";var i=e.querySelector("a.img");i.addEventListener("mouseover",function(i){var r=s();e.classList.remove(n[t]),e.classList.add(n[r])}),i.addEventListener("mouseout",function(e){})};return{init:o}}),define("form/form.store",["dispatcher"],function(e){"use strict";var t=!1,n={},i=function(e){if("ajax-form-send"===e.type){if(!n.hasOwnProperty(e.id))return;if("sending"===n[e.id].status)return;n[e.id].status="sending",o.dispatch({type:"change"})}if("ajax-form-submit"===e.type){if(!n.hasOwnProperty(e.id))return;if("submitted"===n[e.id].status)return;n[e.id].status="submitted",o.dispatch({type:"change"})}if("ajax-form-reset"===e.type){if(!n.hasOwnProperty(e.id))return;if("waiting"===n[e.id].status)return;n[e.id].status="waiting",o.dispatch({type:"change"})}},r=function(e){var t=e.getAttribute("data-id");return t?void(n[t]={id:t,status:"waiting"}):void console.warn("data-id attribute is missing")},s=function(){if(!t){t=!0;for(var n=document.querySelectorAll(".view-form"),s=0;s<n.length;s++)r(n[s]);e.subscribe(i)}},o=function(){var e=[],t=function(t){for(var n=e.length-1;n>=0;n--)e[n](t)},n=function(t){e.push(t)},i=function(t){for(var n=0;n<=e.length-1;n++)e[n]==t&&e.splice(n--,1)};return{dispatch:t,subscribe:n,unsubscribe:i}}(),a=function(){return{items:n}};return t||s(),{eventEmitter:o,getData:a}}),define("form/form.view",["dispatcher","form/form.store"],function(e,t){"use strict";var n={},i=function(){var e=t.getData(),i=function(t){var i=t.id;e.items.hasOwnProperty(i)&&e.items[i].status!==n[i].status&&(n[i].status=e.items[i].status,t.element.classList.remove("waiting"),t.element.classList.remove("sending"),t.element.classList.remove("submitted"),t.element.classList.add(n[i].status))};for(var r in n)n.hasOwnProperty(r)&&i(n[r])},r=function(e){var t=e.getAttribute("data-id");return t?void(n[t]={id:t,element:e,status:!1}):void console.warn("data-id attribute is missing")},s=function(t){var n=t.element,i=function(e){for(var t=!0,n=e.getElementsByTagName("input"),i=e.getElementsByTagName("textarea"),r=function(e){e.getAttribute("data-required")&&(e.value&&""!==e.value||(e.parentNode.classList.add("error"),t=!1))},s=n.length-1;s>=0;s--)r(n[s]);for(var s=i.length-1;s>=0;s--)r(i[s]);return t};t.element.addEventListener("submit",function(r){var s,o,a=n.action;return s=i(n),s&&"waiting"===t.status?void(FormData&&(r.preventDefault(),o=new FormData(n),e.dispatch({type:"ajax-form-send",id:t.id}),fetch(a,{method:"post",credentials:"include",body:o}).then(function(e){return e.json()}).then(function(n){e.dispatch({type:"ajax-form-submit",id:t.id,response:n}),e.dispatch({type:"ajax-server-responce",response:n}),n.hasOwnProperty("status")&&"error"!==n.status||setTimeout(function(){e.dispatch({type:"ajax-form-reset",id:t.id})},3e3)}))):void r.preventDefault()},!1)},o=function(){for(var e=document.querySelectorAll(".view-form"),o=0;o<e.length;o++)r(e[o]);for(var a in n)n.hasOwnProperty(a)&&s(n[a]);i(),t.eventEmitter.subscribe(i)};return{init:o}}),define("form/focus.view",["dispatcher"],function(e){"use strict";var t=function(e){e.addEventListener("focus",function(){e.parentNode.classList.remove("error"),e.parentNode.classList.add("focus")},!1),e.addEventListener("blur",function(){e.parentNode.classList.remove("focus")},!1),e.addEventListener("keyup",function(){e.value?e.parentNode.classList.add("not-empty"):e.parentNode.classList.remove("not-empty")},!1)},n=function(){for(var e=document.getElementsByTagName("input"),n=document.getElementsByTagName("textarea"),i=e.length-1;i>=0;i--)t(e[i]);for(var i=n.length-1;i>=0;i--)t(n[i])};return{init:n}}),define("form/response.view",["dispatcher","popup/popup.store"],function(e,t){"use strict";var n={},i=function(){var e=function(e){e.element.classList.remove("active")};for(var t in n)n.hasOwnProperty(t)&&e(n[t])},r=function(e){if("ajax-form-submit"===e.type)if(e.response.hasOwnProperty("response")&&""!==e.response.response){if(!n.hasOwnProperty(e.id))return;"success"===e.response.status&&(n[e.id].element.innerHTML=e.response.response,n[e.id].element.classList.remove("status-error"),n[e.id].element.classList.add("status-success"),n[e.id].element.classList.add("active")),"error"===e.response.status&&(n[e.id].element.innerHTML=e.response.response,n[e.id].element.classList.add("status-error"),n[e.id].element.classList.remove("status-success"),n[e.id].element.classList.add("active"))}else{if(!n.hasOwnProperty(e.id))return;n[e.id].element.innerHTML="",n[e.id].element.classList.remove("active")}if("ajax-form-reset"===e.type){if(!n.hasOwnProperty(e.id))return;n[e.id].element.innerHTML="",n[e.id].element.classList.remove("active")}},s=function(e){var t=e.getAttribute("data-id");return t?void(n[t]={id:t,element:e}):void console.warn("data-id attribute is missing")},o=function(){for(var n=document.querySelectorAll(".view-form-response"),o=0;o<n.length;o++)s(n[o]);e.subscribe(r),t.eventEmitter.subscribe(i)};return{init:o}}),define("decorations/link-target.view",["dispatcher"],function(e){"use strict";var t,n,i=function(e){e.setAttribute("target","_blank")},r=function(){if(t=document.getElementsByClassName("text")[0],t&&(n=t.getElementsByTagName("a")))for(var e=0;e<n.length;e++)i(n[e])};return{init:r}});var path=document.getElementsByTagName("head")[0].getAttribute("data-path");"/"!==path.slice(-1)&&(path+="/"),require.config({baseUrl:path+"js/modules",paths:{fastclick:"../libs/fstClick",bezierEasing:"../libs/bezierEasing",swipe:"../libs/swipe"}}),require(["domReady","touch/touch-detector.view","menu/menu.view","menu/menu-controls.view","menu/menu-scroll.view","popup/popup.view","popup/popup-controls.view","popup/popup-close.view","header-shift/header-shift.view","header-shift/header-shift-scroll.view","font-resize/font-resize.view","slider/slider.view","slider/slider-arrows.view","slider/slider-controls.view","content-load/content-load-controls.view","content-load/content-load-progress.view","content-load/content-load.view","decorations/text-split.view","decorations/group-hover.view","video/iframe-resize.view","social-widgets/social-widgets.view","social-share/social-share.view","lines-hider/lines-hider.view","change-hover/change-hover.view","form/form.view","form/focus.view","form/response.view","decorations/link-target.view"],function(e,t,n,i,r,s,o,a,c,u,d,l,f,h,v,p,m,g,w,y,b,E,L,T,x,k,D,S){e(function(){t.init(),n.init(),i.init(),r.init(),s.init(),o.init(),a.init(),c.init(),u.init(),d.init(),l.init(),f.init(),h.init(),v.init(),p.init(),m.init(),g.init(),w.init(),y.init(),b.init(),E.init(),L.init(),T.init(),x.init(),k.init(),D.init(),S.init()})}),define("../app",function(){});